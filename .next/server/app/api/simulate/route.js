"use strict";(()=>{var e={};e.id=284,e.ids=[284],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},370:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>p,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>_,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var r={};a.r(r),a.d(r,{POST:()=>u});var i=a(9303),n=a(8716),o=a(670),s=a(7070),c=a(7090);async function u(e){try{let t;let{vehicleId:a,environment:r,powerMultiplier:i=1,thrustMultiplier:n=1,useAfterburnner:o=!0}=await e.json(),u=c.FX.cars.find(e=>e.id===a),_=c.FX.jets.find(e=>e.id===a),l=u||_||null;if(!l)return s.NextResponse.json({error:"Vehicle not found"},{status:404});let d=function(e,t){let a=c.cv.R_SPECIFIC,r=e+273.15,i=r-.0065*t;if(i<=0)return .01;let n=-c.cv.GRAVITY/(.0065*a);return Math.max(c.cv.ISA_PRESSURE_PA*Math.pow(i/r,n)/(a*i),.01)}(r.temperature,r.altitude),h={...r,air_density:d};return t="car"===l.category?function(e,t,a=1,r=c.y7.MAX_TIME,i=c.y7.DT){var n;let o,s,u;let{specs:_}=e,l=[],d=[],h=[],p=[],f=[],g=0,m=0,y=0,w=(n=t.surface_condition,c.N_[n]),v=function(e,t,a){let r=c.LY[a];return t*e*c.cv.GRAVITY*r}(_.curb_weight,w,_.drivetrain);for(;g<r;){let e=Math.min(v,function(e,t,a=1e3){let r=t/3.6;return r<.1?a/.33:745.7*e/r}(_.horsepower*a,3.6*m,_.torque)),r=function(e,t,a,r){let i=e/3.6;return .5*r*i*i*t*a}(3.6*m,_.drag_coefficient,_.frontal_area,t.air_density),n=(e-(r+.013*_.curb_weight*c.cv.GRAVITY))/_.curb_weight,w=m+n*i,A=y+m*i,b=n/c.cv.GRAVITY;if(l.push(g),d.push(A),h.push(3.6*w),p.push(n),f.push(b),h[h.length-2]<100&&h[h.length-1]>=100&&!o&&(o=g),A>=400&&!s&&(s=g),A>=1e3&&!u&&(u=g),Math.abs(n)<c.y7.ACCEL_THRESHOLD||3.6*w>150)break;g+=i,m=w,y=A}return{vehicle_id:e.id,vehicle_name:e.name,category:"car",time_array:l,distance_array:d,velocity_array:h,acceleration_array:p,g_force_array:f,time_0_to_100:o,time_quarter_mile:s,time_1_km:u,final_velocity:h[h.length-1]||0,final_distance:d[d.length-1]||0,simulation_duration:g}}(l,h,i):function(e,t,a=!0,r=!0,i=1,n=c.y7.MAX_TIME,o=c.y7.DT){let s,u;let{specs:_}=e,l=a?_.takeoff_weight:_.empty_weight,d=[],h=[],p=[],f=[],g=[],m=0,y=0,w=0,v=_.takeoff_speed/3.6;for(;m<n;){let e=function(e,t,a,r=!0){let i=1;return e>1200&&(i=Math.max(.8,1-(e-1200)/2e3*.2)),(r?a:t)*i}(3.6*y,_.dry_thrust,_.wet_thrust,r),a=((e*=1e3*i)-function(e,t,a,r){let i=e/3.6;return .5*r*i*i*t*a}(3.6*y,_.drag_coefficient,_.wing_area,t.air_density))/l,A=y+a*o,b=w+y*o,R=a/c.cv.GRAVITY;if(d.push(m),h.push(b),p.push(3.6*A),f.push(a),g.push(R),A>=v&&!s&&(s=m,u=b,m>s+1)||b>1.5*_.runway_length||(m+=o,y=A,w=b,m>n))break}return{vehicle_id:e.id,vehicle_name:e.name,category:"fighter_jet",time_array:d,distance_array:h,velocity_array:p,acceleration_array:f,g_force_array:g,time_0_to_100:void 0,time_quarter_mile:void 0,time_1_km:void 0,time_takeoff:s,final_velocity:p[p.length-1]||0,final_distance:h[h.length-1]||0,runway_distance:u,simulation_duration:m}}(l,h,!0,o,n),s.NextResponse.json(t)}catch(e){return console.error("Simulation error:",e),s.NextResponse.json({error:"Simulation failed",details:e.message},{status:500})}}let _=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/simulate/route",pathname:"/api/simulate",filename:"route",bundlePath:"app/api/simulate/route"},resolvedPagePath:"/Users/jeonbada/test/aero-drag-nextjs/app/api/simulate/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:h}=_,p="/api/simulate/route";function f(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}},7090:(e,t,a)=>{a.d(t,{FX:()=>n,LY:()=>s,N_:()=>o,cv:()=>r,y7:()=>i});let r={GRAVITY:9.81,R_SPECIFIC:287.05,ISA_TEMP_KELVIN:288.15,ISA_PRESSURE_PA:101325,ISA_DENSITY:1.225},i={DT:.01,MAX_TIME:120,ACCEL_THRESHOLD:.01},n={cars:[{id:"bugatti_chiron",name:"Bugatti Chiron",manufacturer:"Bugatti",category:"car",year:2016,specs:{horsepower:1500,torque:1600,curb_weight:1995,drivetrain:"AWD",drag_coefficient:.34,frontal_area:2.4,acceleration_0_100:2.4,top_speed:420},imageUrl:"https://images.unsplash.com/photo-1552820728-8ac41f1ce891?w=800&q=80"},{id:"tesla_model_s_plaid",name:"Tesla Model S Plaid",manufacturer:"Tesla",category:"car",year:2021,specs:{horsepower:1020,torque:1620,curb_weight:2150,drivetrain:"AWD",drag_coefficient:.208,frontal_area:2.197,acceleration_0_100:2.15,top_speed:322},imageUrl:"https://images.unsplash.com/photo-1617469767537-b85cb00bafbb?w=800&q=80"},{id:"lamborghini_aventador",name:"Lamborghini Aventador",manufacturer:"Lamborghini",category:"car",year:2011,specs:{horsepower:740,torque:690,curb_weight:1575,drivetrain:"AWD",drag_coefficient:.33,frontal_area:2.5,acceleration_0_100:2.9,top_speed:350},imageUrl:"https://images.unsplash.com/photo-1578693846526-b42dd0773add?w=800&q=80"}],jets:[{id:"f16_viper",name:"F-16 Fighting Falcon",manufacturer:"General Dynamics",category:"fighter_jet",year:1978,specs:{dry_thrust:109,wet_thrust:156,empty_weight:7700,takeoff_weight:16330,max_loaded_weight:21320,drag_coefficient:.025,wing_area:27.87,takeoff_speed:260,max_speed:2124,runway_length:2400},imageUrl:"https://images.unsplash.com/photo-1552966843-e3e08ec6e95a?w=800&q=80"},{id:"f15_eagle",name:"F-15 Eagle",manufacturer:"McDonnell Douglas",category:"fighter_jet",year:1972,specs:{dry_thrust:65.3,wet_thrust:100.6,empty_weight:13054,takeoff_weight:20610,max_loaded_weight:30844,drag_coefficient:.025,wing_area:56.5,takeoff_speed:280,max_speed:2663,runway_length:1500},imageUrl:"https://images.unsplash.com/photo-1544027993-37dbf63cf174?w=800&q=80"}]},o={dry:1,wet:.75,icy:.35},s={AWD:1,RWD:.5,FWD:.55}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,972],()=>a(370));module.exports=r})();